syntax = "proto3";

option go_package = "berty.tech/go/pkg/bertyprotocol";

import "google/protobuf/descriptor.proto";


// // @To Test
// extend google.protobuf.MethodOptions {
//   string id = 53001;
// }

service Protocol {
  rpc EventSubscribe(EventSubscribeRequest) returns (stream EventStream); // { option (id) = "account"; };

  // Account
  rpc AccountExportData(AccountExportDataRequest) returns (AccountExportDataReply); // { option (id) = "account"; };
  rpc AccountGetInformation(AccountGetInformationRequest) returns (AccountGetInformationReply); // { option (id) = "account"; };
  rpc AccountGetNetworkConfiguration(GetNetworkConfigurationRequest) returns (GetNetworkConfigurationReply); // { option (id) = "account"; };
  rpc AccountLinkNewDevice(AccountLinkNewDeviceRequest) returns (AccountLinkNewDeviceReply); // { option (id) = "account"; };

  // Account Public Contact Request
  rpc AccountPublicContactRequestDisable(PublicContactRequestDisableRequest) returns (PublicContactRequestDisableReply); // { option (id) = "account"; };
  rpc AccountPublicContactRequestEnable(PublicContactRequestEnableRequest) returns (PublicContactRequestEnableReply); // { option (id) = "account"; };
  rpc AccountPublicContactRequestResetLink(AccountPublicContactRequestResetLinkRequest) returns (AccountPublicContactRequestResetLinkReply); // { option (id) = "account"; };

  // Contact Request
  rpc ContactRequestAccept(ContactRequestAcceptRequest) returns (ContactRequestAcceptReply);
  rpc ContactRequestDiscard(ContactRequestDiscardRequest) returns (ContactRequestDiscardReply);
  rpc ContactRequestListIncoming(ContactRequestListIncomingRequest) returns (stream ContactRequestListIncomingReply);
  rpc ContactRequestListOutgoing(ContactRequestListOutgoingRequest) returns (stream ContactRequestListOutgoingReply);
  rpc ContactRequestSend(ContactRequestSendRequest) returns (ContactRequestSendReply);

  // Contact
  rpc ContactGet(ContactGetRequest) returns (ContactGetReply);
  rpc ContactInitStream(ContactInitStreamRequest) returns (ContactInitStreamReply);
  rpc ContactList(ContactListRequest) returns (stream ContactListReply);
  rpc ContactRemove(ContactRemoveRequest) returns (ContactRemoveReply);

  // Device
  rpc DeviceOpenStream(DeviceOpenStreamRequest) returns (DeviceOpenStreamReply);

  // Group
  rpc GroupCreate(GroupCreateRequest) returns (GroupCreateReply);
  rpc GroupGenerateInviteLink(GroupGenerateInviteLinkRequest) returns (GroupGenerateInviteLinkReply);
  rpc GroupLeave(GroupLeaveRequest) returns (GroupLeaveReply);
  rpc GroupList(GroupListRequest) returns (stream GroupListReply);

  // Group Message
  rpc GroupMessageCreate(GroupMessageCreateRequest) returns (GroupMessageCreateReply);
  rpc GroupMessageList(GroupMessageListRequest) returns (stream GroupMessageListReply);

  // Group Request
  rpc GroupRequestAccept(GroupRequestAcceptRequest) returns (GroupRequestAcceptReply);
  rpc GroupRequestCreate(GroupRequestCreateRequest) returns (GroupRequestCreateReply);
  rpc GroupRequestDiscard(GroupRequestDiscardRequest) returns (GroupRequestDiscardReply);
  rpc GroupRequestList(GroupRequestListRequest) returns (stream GroupRequestListReply);
}

// Account
message ContactGetRequest {
  string account_id = 1;
}
message ContactGetReply {
  string contact_id = 1;
}

message AccountGetInformationRequest {
  string account_id = 1;
}

message AccountGetInformationReply {
  // account information
}

message GetNetworkConfigurationRequest {
  string account_id = 1;

}
message GetNetworkConfigurationReply {
  // NetworkConfiguration
}

message AccountPublicContactRequestResetLinkRequest {
  string account_id = 1;
}
message AccountPublicContactRequestResetLinkReply {}

message PublicContactRequestDisableRequest {
  string account_id = 1;
}
message PublicContactRequestDisableReply {}

message PublicContactRequestEnableRequest {
  string account_id = 1;
}
message PublicContactRequestEnableReply {}

message AccountExportDataRequest {
  string account_id = 1;
}
message AccountExportDataReply {}

message AccountLinkNewDeviceRequest {
  string account_id = 1;
}
message AccountLinkNewDeviceReply {}

message ContactsModuleVoidRequest {
  string account_id = 1;
}
message ContactsModuleVoidReply {}

message GroupsModuleVoidRequest {
  string account_id = 1;
}
message GroupsModuleVoidReply {}

message EventSubscribeRequest {
  string account_id = 1;
}
message EventStream {
  // Account Event
}


// Device

message DeviceOpenStreamRequest {
  string device_id = 1;
}
message DeviceOpenStreamReply {}


// Contact

message ContactRequestAcceptRequest {
  string contact_id = 1;
}
message ContactRequestAcceptReply {}

message ContactRequestDiscardRequest {
  string contact_id = 1;
}
message ContactRequestDiscardReply {}

message ContactInitStreamRequest {
  string contact_id = 1;
}
message ContactInitStreamReply {}

message ContactRemoveRequest {
  string contact_id = 1;
}
message ContactRemoveReply {}

// GroupMember

message ContactListRequest {

};

message ContactListReply {
};

message ContactRequestListIncomingRequest {
};

message ContactRequestListIncomingReply {
};

message ContactContactGetRequest {
};

message ContactContactGetReply {
};

message ContactRequestSendRequest {
};

message ContactRequestSendReply {
};


message GroupRequestListRequest {
};

message GroupRequestListReply {
};

message GroupRequestAcceptRequest {
};

message GroupRequestAcceptReply {
};

message GroupRequestDiscardRequest {
};

message GroupRequestDiscardReply {
};

message GroupRequestCreateRequest {
};

message GroupRequestCreateReply {
};

message GroupListRequest {
};

message GroupListReply {
};

message GroupCreateRequest {
};

message GroupCreateReply {
};

message GroupGenerateInviteLinkRequest {
};

message GroupGenerateInviteLinkReply {
};

message GroupLeaveRequest {
};

message GroupLeaveReply {
};

message GroupMessageListRequest {
};

message GroupMessageListReply {
};

message GroupMessageCreateRequest {
};

message GroupMessageCreateReply {
};

message ContactRequestListOutgoingRequest {
};

message ContactRequestListOutgoingReply {
};
